# -*- coding: utf-8 -*-
"""centroid_calc_colab.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1yucRNSL4sPshdHIQgU1zwXfdbxYPwKRV

## ІНІЦІАЛІЗАЦІЯ. РОБИТИ 1 РАЗ ЗА СЕСІЮ
"""

!pip install PyGeodesy
!curl -L -o centroidutilcolab.py https://raw.githubusercontent.com/protw/airscape/master/stavok/gis/centroid/centroid_util_colab.py
from centroidutilcolab import centroid_main

#@title Параметри розрахунків

format_pattern = [
    "46.7373, 32.8128", 
    "46,7373 / 32,8128", 
    "46.7373 32.8128"]

coord_format = "46.7373, 32.8128" #@param ["46.7373, 32.8128", "46,7373 / 32,8128", "46.7373 32.8128"]
lat_lon_order = 'LatLon' #@param ['LatLon', 'LonLat']
perctl = "65" #@param [50, 65, 75, 95]
zoom_start = 13 #@param {type:"slider", min:11, max:15, step:1}

coord_format_id = []
for i,_ in enumerate(format_pattern):
    if coord_format == format_pattern[i]:
        coord_format_id = i
        break

perctl = float(perctl)

print(f'Формат координат: {coord_format}')
print(f'Ід формата координат: {coord_format_id}')
print(f'Порядок координат: {lat_lon_order}')
print(f'Персентиль: {perctl}')
print(f'Стартовий зум мапи: {zoom_start}')

"""## Зразки вхідного тексту

Десяткова крапка і кома між значеннями (**coord_format_id = 0**):

>	(44.6857, 33.56173); (44.68599, 33.56555); (44.68587, 33.56751); (44.68223, 33.56187); (44.68652, 33.56976); (44.68375, 33.5627);	 (44.68555, 33.55777); (44.68307, 33.55616); (44.68441, 33.55625); (44.68522, 33.55672); (44.68269, 33.55475); (44.68137, 33.55415);	 (44.68064, 33.55404); (44.67424, 33.55031); (44.6773, 33.55325); (44.70537, 33.59871); (44.70657, 33.59807); (44.70537, 33.59871); (44.70602, 33.59804); (44.67736, 33.55325).  

Десяткова кома і дріб (slash) між значеннями (**coord_format_id = 1**):

> Lorem ipsum dolor sit amet, consectetur 46,736906/ 32,810302 adipiscin gelit, sed do 46,737364/  32,812807 eiusmod tempor incididunt 123,987 ut labore et dolore 46,739309/ 32,807631 magna aliqua. Quam 345,678/34 quisque id diam vel quam elementum. Mauris augue neque 46,740682/ 32,802510 gravida in fermentum et sollicitudin ac. 46,734260/32,811582 Imperdiet dui accumsan sit amet. Risus sed vulputate odio ut enim. 

Десяткова крапка і пробіл (**coord_format_id = 2**):

> АБВГД 48.01388889 38.79638889 07:59 АБВГД 48.01416667 38.90555556 07:53 АБВГД 50.02583333 36.62444444 07:53 АБВГД 48.02972222 38.96805556 07:53 АБВГД 48.00027778 38.25944444 07:52 АБВГД 48.02416667 38.23111111 07:52 АБВГД 47.02138889 38.19 07:49 АБВГД 45.00166667 35.62611111 07:47 АБВГД 46.03694444 35.53361111 07:46 АБВГД 45.01694444 32.87138889 07:41 АБВГД 45.01527778 36.95694444 07:37 АБВГД 45.0175 32.87888889 07:35 АБВГД 45.03055556 36.27305556 07:32 АБВГД 46.00333333 33.52361111 07:30 АБВГД 45.01777778 32.87194444 07:27 АБВГД 45.03388889 33.80055556 07:10 АБВГД 48.01777778 39.56805556 07:05 АБВГД 47.01833333 38.14944444 07:02 АБВГД 48.02972222 39.27527778 07:02 АБВГД 47.03722222 38.12 07:01
"""

#@title СКОПІЮЙТЕ ВХІДНИЙ ТЕКСТ СЮДИ:

text = '(44.6857, 33.56173); (44.68599, 33.56555); (44.68587, 33.56751); (44.68223, 33.56187); (44.68652, 33.56976); (44.68375, 33.5627); (44.68555, 33.55777); (44.68307, 33.55616); (44.68441, 33.55625); (44.68522, 33.55672); (44.68269, 33.55475); (44.68137, 33.55415); (44.68064, 33.55404); (44.67424, 33.55031); (44.6773, 33.55325); (44.70537, 33.59871); (44.70657, 33.59807); (44.70537, 33.59871); (44.70602, 33.59804); (44.67736, 33.55325).' #@param {type:"string"}

text

"""## Розрахунок"""

map = centroid_main(text, coord_format_id=coord_format_id, perctl=perctl, zoom_start=zoom_start)

"""## Візуалізація"""

map