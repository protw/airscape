# Збирання твітів без API

З точки зору збирання даних [*Твіттер* має певні переваги над *Фейсбуком*](./social_media.md). Але вивчення [умов збирання твітів через API](./tariffs.md) приводить до невтішних висновків:

- У пакеті *Стандартний* є обмеження на щомісячну кількість зібраних твітів - 500 тисяч, на набір операторів, на довжину запиту. Також період історичного перегляду обмежена 7 днями, а кількість твітів на користувача - 3200. Але пакет надається безкоштовно.
- У пакеті *Преміум* ці та інші обмеження знімаються, але місячна ціна послуги складає 2500 і 1900 доларів США для послуг *Пошук твітів: 30 днів* і *Пошук твітів: Весь архів*.

До того використання API *Твіттер* потребує реєстрації на Порталі Розробника, що може затягнутись на добу.

## Альтернатива

Як не дивно, *Твіттер* не забороняє альтернативний варіант доступу безпосередньо через власний веб-інтерфейс користувача. Таким чином, з використанням автоматизації веб-скрейпінгу з'являється інша можливість збирати твіти. Розглянемо цю альтернативу докладніше на прикладі модулю *Twint*.

[Twint](https://github.com/twintproject/twint/) - це інструмент для скрейпінгу, розроблений на Python, здатний збирати твіти від конкретних користувачів та твіти на певні теми, з певними хештегами, з географічним розташуванням, мовою тощо. *Twint* також полегшує збирання підписників окремого користувача, вподобайок та ретвітів.

*Twint* має такі основні переваги:

- **Без обмеження швидкості.** Можна завантажувати майже всі твіти. Наприклад, автору [статті](https://medium.datadriveninvestor.com/scrape-twitter-without-limits-using-twint-92509f2503cd) вдалося зібрати близько 1.5 млн твітів про Covid-19 за період часу між 3 і 5 місяцями. І це було зібрано **всього за пару годин**.
- ***Twint* не потребує попереднього налаштування.** На відміну від використання *Tweepy*, вам не потрібно створювати застосунок на Порталі Розробника *Twitter* (і потім ще чекати схвалення від *Twitter*).
- ***Twint* можна використовувати анонімно**, оскільки він не просить вас підключитися до власного облікового запису або ввести ваші облікові дані API.
- **Є багатофункціональний командний рядок.**

Докладно з можливостями Twint можна ознайомитись у його репозитарії. 

## Управління з командного рядка

Для загального огляду функціональних можливостей лише наведемо команди командного рядка 

| Команда &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | Призначення<br /><br />                                      |
| :----------------------------------------------------------- | ------------------------------------------------------------ |
| `-u, --username`                                             | Твіти якого користувача ви хочете зібрати.                   |
| `-s, --search`                                               | Знайти твіти, що містять це слово або фразу.                 |
| `-g, --geo`                                                  | Знайти геокодовані твіти.                                    |
| `--near`                                                     | Поруч із зазначеним містом.                                  |
| `--location`                                                 | Показати місцезнаходження користувача (експериментальне).    |
| `-l, --lang`                                                 | Знайти твіти певною мовою (див. [Коди мов](https://github.com/haccer/twint/wiki/Langauge-codes)). |
| `-o, --output`                                               | Зберегти у вихідний файл.                                    |
| `-es, --elasticsearch`                                       | Індексування на *Elasticsearch*.                             |
| `--year`                                                     | Фільтрувати твіти до зазначеного року.                       |
| `--since`                                                    | Фільтрувати твіти з дати (наприклад: `2017-12-27`).          |
| `--until`                                                    | Фільтрувати твіти до дати (наприклад: `2017-12-27`).         |
| `--email`                                                    | Фільтрувати твіти, що можуть містити адреси електронної пошти. |
| `--phone`                                                    | Фільтрувати твіти, що можуть містити номери телефонів.       |
| `--verified`                                                 | Відображати твіти лише від перевірених користувачів (Використовувати з `-s`). |
| `--csv`                                                      | Записати як файл *CSV*.                                      |
| `--json`                                                     | Записати як файл `.json`.                                    |
| `--hashtags`                                                 | Вивести хештеги в окрему колонку.                            |
| `--userid`                                                   | Ідентифікатор користувача *Twitter*.                         |
| `--limit`                                                    | Кількість твітів, що потрібно витягти (з кроком 20).         |
| `--count`                                                    | Відобразити кількість твітів, зібраних в кінці сеансу.       |
| `--stats`                                                    | Показати кількість відповідей, ретвітів та вподобайок.       |
| `-db, --database`                                            | Зберігти твіти в базі даних *sqlite3*.                       |
| `--to`                                                       | Шукати твіти до користувача.                                 |
| `--all`                                                      | Шукати усі твіти, пов’язані з користувачем.                  |
| `--followers`                                                | Шукати послідовників людини.                                 |
| `--following`                                                | Шукати за ким людина спостерігає.                            |
| `--favorites`                                                | Шукати твіти,  що сподобалися користувачеві.                 |
| `--proxy-type`                                               | *Socks5*, *HTTP* тощо.                                       |
| `--proxy-host`                                               | Ім'я хоста проксі або *IP*.                                  |
| `--proxy-port`                                               | Порт проксі-сервера.                                         |
| `--essid`                                                    | Ідентифікатор сеансу *Elasticsearch*, використовується для диференціації сеансів пошуку. |
| `--userlist`                                                 | Список користувачів зі списку або файлу.                     |
| `--retweets`                                                 | Включити ретвіти користувача (попередження: є обмеження).    |
| `--format`                                                   | Спеціальний формат виведення (докладніше див. у [вікі](https://github.com/twintproject/twint/wiki)). |
| `--user-full`                                                | Зібрати всю інформацію про користувача (використовується лише з followers або following). |
| `--profile-full`                                             | Повільний, але ефективний метод збирання твітів користувача та RT. |
| `--store-pandas`                                             | Зберегти твіти у файлі *DataFrame* (*Pandas*).               |
| `--pandas-type`                                              | Вказати формат збереження у *DataFrame*: *HDF5* (за замовчуванням) або *Pickle*. |
| `-it, --index-tweets`                                        | Власна назва індексу *Elasticsearch* для твітів.             |
| `-if, --index-follow`                                        | Власна назва індексу *Elasticsearch* для підписок.           |
| `-iu, --index-users`                                         | Власна назва індексу *Elasticsearch* для користувачів.       |
| `-dt, --doc-type`                                            | Власний тип документа *Elasticsearch*.                       |
| `--debug`                                                    | Зберігати інформацію у журналах налагодження.                |
| `--resume`                                                   | Резюме з *Tweet ID*.                                         |
| `--videos`                                                   | Відображати лише твіти з відео.                              |
| `--images`                                                   | Відображати лише твіти із зображеннями.                      |
| `--media`                                                    | Відображати твіти лише із зображеннями або відео.            |
| `--replies`                                                  | Відображення відповідей на тему.                             |
| `-pc, --pandas-clean`                                        | Автоматично очищати датафрейм *Pandas* перед кожним зчитуванням. |
| `--get-replies`                                              | Усі відповіді на твіт.                                       |
| `-pt, --popular-tweets`                                      | Знайти популярні твіти замість останніх.                     |
| `-sc, --skip-certs`                                          | Пропустити перевірку сертифікатів, корисно для *SSC*.        |
| `-ho, --hide-output`                                         | Приховати виведення на термінал, твіти не відображатимуться. |
| `-nr, --native-retweets`                                     | Фільтрувати результати лише для ретвітів (буде повернуто кілька твітів!). |
| `--min-likes`                                                | Фільтрувати твіти з мінімальною кількістю вподобайок.        |
| `--min-retweets`                                             | Фільтрувати твіти з мінімальною кількістю ретвітів.          |
| `--min-replies`                                              | Фільтрувати твіти з мінімальною кількістю відповідей.        |
| `--links`                                                    | Включити або виключити твіти, що містять одне або більше посилань. Якщо не вказано, ви отримаєте обидва твіти, які можуть містити посилання чи ні. |
| `--source`                                                   | Фільтрувати твіти до клієнта з конкретного джерела.          |
| `--members-list`                                             | Фільтрувати твіти, надіслані користувачами з певного списку. |
| `-fr, --filter-retweets`                                     | Виключити ретвіти з результатів.                             |

