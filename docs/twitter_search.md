# Пошук в Твіттері

## Кінцеві точки

API *Твіттера* має багато різних кінцевих точок (*end point*). Нижче наданий їхній список, наявний на момент написання цієї статті, де за посиланням можна знайти специфікацію параметрів запиту для кожної кінцевої точки:

| Категорія      | Кінцева точка                                                | Пояснення                                                    |
| :------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **Tweets**     | [**Tweet lookup**](https://developer.twitter.com/en/docs/twitter-api/tweets/lookup/introduction) | Шукати твіти за Ід.                                          |
|                | [**Search Tweets**](https://developer.twitter.com/en/docs/twitter-api/tweets/search/introduction) | Запитати останні сім днів або повний архів твітів та отримати повну відповідь. Повна архівна кінцева точка пошуку наразі доступна лише у версії продукту *Academic Research*. |
|                | [**Tweet counts**](https://developer.twitter.com/en/docs/twitter-api/tweets/counts/introduction) | Отримати кількість твітів за останні сім днів або з повного архіву, що відповідає запиту. Повна архівна кінцева точка підрахунку твітів наразі доступна лише у версії продукту *Academic Research*. |
|                | [**Timelines**](https://developer.twitter.com/en/docs/twitter-api/tweets/timelines/introduction) | Отримати хронологію будь-яких твітів, складених з певного облікового запису Twitter, або згадок про певний обліковий запис Twitter. |
|                | [**Filtered stream**](https://developer.twitter.com/en/docs/twitter-api/tweets/filtered-stream/introduction) | Відфільтрувати весь потік публічних твітів у реальному часі. |
|                | [**Sampled stream**](https://developer.twitter.com/en/docs/twitter-api/tweets/sampled-stream/introduction) | Передавати порцію нових твітів по мірі їхньої публікації, біля ~ 1% усіх публічних твітів у режимі реального часу. |
|                | **[Retweets](https://developer.twitter.com/en/docs/twitter-api/tweets/retweets/introduction)** | Отримати список облікових записів, які ретвітнули твіт або ретвіт, або скасували ретвіт твіту. |
|                | [**Likes**](https://developer.twitter.com/en/docs/twitter-api/tweets/likes/introduction) | Отримати список користувачів, яким сподобався твіт, отримайте список<br/>твітів, що були вподобані або не вподобані користувачем. |
|                | [**Hide replies**](https://developer.twitter.com/en/docs/twitter-api/tweets/hide-replies/introduction) | Приховати або показати відповідь на твіт.                    |
| **Users**      | [**User lookup**](https://developer.twitter.com/en/docs/twitter-api/users/lookup/introduction) | Шукати користувачів за іменем або Ід.                        |
|                | [**Follows**](https://developer.twitter.com/en/docs/twitter-api/users/follows/introduction) | Отримати послідовників облікового запису, отримати список, за ким підписався обліковий запис, або стежити за користувачем чи припинити слідкувати. |
|                | [**Blocks**](https://developer.twitter.com/en/docs/twitter-api/users/blocks/introduction) | Отримати список користувачів, яких обліковий запис заблокував, або заблокувати та розблокувати користувача. |
|                | **[Mutes](https://developer.twitter.com/en/docs/twitter-api/users/mutes/introduction)** | Вимкнути або увімкнути користувача                           |
| **Spaces**     | **[Lookup Spaces](https://developer.twitter.com/en/docs/twitter-api/spaces/lookup)** | Пошук простору за допомогою Ід або імені автора              |
|                | **[Search Spaces](https://developer.twitter.com/en/docs/twitter-api/spaces/search)** | Шукати простори за ключовим словом                           |
| **Compliance** | **[Batch compliance](https://developer.twitter.com/en/docs/twitter-api/compliance/batch-compliance)** | Пакетне завантаження набору даних, щоб зрозуміти, що потрібно зробити, щоб ваші набори даних відображали поточний стан вмісту в Twitter. |

Параметри запиту можна розділити на три групи:

| Ключове слово<br/>параметра запиту                           | Група параметрів                                             |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 'query'<br/>'start_time'<br/>'end_time'<br/>'max_results'    | Параметри для контроля повернутого<br/>відгуку на запит      |
| 'expansions'<br/>'tweet.fields'<br/>'user.fields'<br/>'place.fields' | Додаткові поля, що можна включити<br/>до відгуку на запит    |
| 'next_token'                                                 | Ункальний ідентифікатор поля для доступу<br/>до наступної сторінки результатів |

## Необхідні кінцеві точки

У разі повноархівної кінцевої точки пошуку параметр *query* є єдиним параметром, **необхідним** для подання запиту. Завжди переглядайте документацію щодо використовуваної кінцевої точки для належного формування параметрів запиту, щоб уникнути проблем.

## Параметр запиту

Параметр *query* - це місце, де ви розміщуєте ключові слова, що потрібно шукати.

Запити можуть бути такими ж простими, як пошук твітів, що містять слово `'xbox'`, або такими складними, як-то `'(xbox europe) OR (xbox usa)'`, що поверне твіти, що містять слова `'xbox AND europe OR xbox AND usa'`.

Крім того, *query* можна налаштувати з допомогою *операторів пошуку*. Існує так багато варіантів, які допомагають звузити результати пошуку. Повний список цих операторів можна знайти [тут](https://developer.twitter.com/en/docs/twitter-api/tweets/search/integrate/build-a-query).

Приклад простого запиту з оператором: `'xbox lang:en'`.

## Мітки часу

Формат, що використовує Твіттер для параметрів (міток часу) *end_time* і *start_time*, відповідає стандарту ISO 8601/RFC 3339:

* `YYYY-MM-DDTHH:mm:ss.fffZ`

Тому обов’язково перетворіть потрібні дати в цей формат.

## Обсяг результатів

Кількість результатів пошуку, повернутих за запитом, наразі обмежена від 10 до 500 результатів.

Тепер з'ясуємо як можна отримати більше 500 результатів? Ось тут гратиме *next_token* та розбивка на сторінки!

Відповідь проста: якщо на ваш запит повернуто більше результатів, Twitter поверне унікальний *next_token*, що можна використати для наступного запиту і він поверне наступні нові результати.

Якщо ви хочете отримати всі можливі твіти для вашого запиту, ви просто продовжуєте посилати запити, використовуючи щоразу новий (наступний) *next_token* доти, доки *next_token* не припинить існувати (`None`), сигналізуючи тим самим, що видобуті всі твіти.