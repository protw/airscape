# Відпрацьований робочий план

211013

## Прелюдія

- [x] Для проведення аналізу обираємо Твіттер. Попри нижче охоплення в Україні у порівнянні з ФБ та Інстаграм, Твіттер значно менше обмежує користувачів-скреперів.
- [x] Можна працювати через АРІ або напряму знімати інформацію з веб-сторінки. Другий варіант безкоштовний, перший варіант дозволяє безкоштовно зняти 500 тис. твітів за місяць (також є безкоштовний тариф у 10 млн твітів на місяць для академічних досліджень). Крім того перший варіант надає можливість доступатись до ширшого переліку полів.
  - [x] З огляду на попередній пункт потрібно отримати обліковку на Порталі Розробника Твіттер. Це займе певний час через веріфікацію службою Твіттер наданої вами інформації. Можуть, як у моєму випадку поставити додаткові питання. Тобто потрібна чіткість формулювань і певна терплячість.
  - [ ] Портал Розробника Твіттер дозволяє командну роботу над проєктом шляхом підключення інших розробників до проєкту.

## Зчитування твітів

- [x] Спочатку відлагодимо просту процедуру зчитування твітів та їнього збереження у БД (для початку CSV-файлу може вистачити).
  - [x] Запустимо тестовий приклад на базі статті [Collecting tweets from Twitter API v2 using Python 3 | Towards Data Science](https://towardsdatascience.com/an-extensive-guide-to-collecting-tweets-from-twitter-api-v2-for-academic-research-using-python-3-518fcb71df2a)
    - [x] Це результат тестового запуску [Python читає Твіттер. Збираємо твіти з допомогою Twitter API… | by Olegh Bondarenko | Sep, 2021 | Medium](https://oleghbond.medium.com/python-%D1%87%D0%B8%D1%82%D0%B0%D1%94-%D1%82%D0%B2%D1%96%D1%82%D1%82%D0%B5%D1%80-57fd521d524b)
  - [ ] Є аналогічний, але простіший приклад [Searching for Tweets with Python. | by Martin Šiklar | Towards Data Science](https://towardsdatascience.com/searching-for-tweets-with-python-f659144b225f)

## Вибір твітів

Вибір твітів здійснюється за трьома складовими: часовий інтервал, просторовий регіон, контекст.

- [x] **Час:** Відлагодити вибірку (selection) твітів для визначеного періоду (інтервалу) часу - поля `start_time` і `end_time` в параметрах запиту `query_params`
- [x] **Простір:** Розібратись і відлагодити вибірку (selection) твітів за географічною ознакою.
  - [x] у пошуковий рядок Твіттера (це без API) можна вставити таке:
    - `geocode:50.457964,30.4733504,1.5km since:2021-01-01 until:2021-09-20` 
    - смисл запиту доволі self-explainable: шукати твіти в радіусі 1.5 км від нашої хати за 2021 рік
    - аналогічно можна зробити з API
    - **Геолокалізація** : оператор пошуку "near" недоступний в API, але є більш точний спосіб обмежити ваш запит на певне місце розташування, використовуючи параметр геокоду, зазначений у шаблоні "широта, довгота, радіус", наприклад, “37,781157, -122,398720,1mi”. Під час географічного пошуку API пошуку спочатку намагатиметься знайти твіти, що мають широту/довготу в запитуваному геокоді, а в разі невдачі він спробує знайти твіти, створені користувачами, розташування профілю яких можна геокодувати у зворотному напрямку lat/long у запитуваному геокоді, тобто можливий прийом твітів, які не містять lat/long інформації.
    - ==поки що на цьому призупинимось==
  - [ ] Приналежність регіону, місту тощо - [Filtering Tweets by location](https://developer.twitter.com/en/docs/tutorials/filtering-tweets-by-location). Твіттер може надавати гео прив'язку за місцем реєстрації обліковки та/або за місцем публікації твіта для *geo-tagged* твітів. Є можливість шукати за координатами і радіусом навколо. Можна фільтрувати за містом (та навіть районом міста), але у Преміум підписці.
  - [ ] Безпосереднє отримання географічних координат твітів.
  - [ ] [Filtering Tweets by Location. Regular Expressions + Account Location… | Towards Data Science](https://towardsdatascience.com/filtering-tweets-by-location-baca601ae5cd) - через обліковки користувачів визначає конкретний штат у США, там де це зазначено
- [ ] **Контекст:** Розібратись і відлагодити вибірку (selection) твітів, що стосуються якості повітря, включно із запахами.
  - [ ] Розібратись, як працюють [складні запити у Твіттері](https://developer.twitter.com/en/docs/twitter-api/tweets/search/integrate/build-a-query).
  - [ ] Розробити запит стосовно якості повітря для укр, рос та англ мов.
    - [ ] Чи визначає сам Твіттер мову твіту `lang:uk`? Це було б ідеальне рішення
    - [ ] Визначення мови з аналізу тексту твіту, як варіант
      - [ ] *polyglot*: 
        `from polyglot.detect import Detector`
        `detector = Detector(sample_text)`
        `print(detector.language)`
      - [ ] *googletrans* (треба розібратися):
        `from googletrans import Translator`
        `translator = Translator()`
        `translator.detect('이 문장은 한글로 쓰여졌습니다.')`
    - [ ] Врахування словоформ і відповідників трьома мовами: укр, рос та англ
    - [ ] Залучення синонимів 
  - [ ] [Comparing VADER and Text Blob to Human Sentiment | by Leah Pope | Towards Data Science](https://towardsdatascience.com/comparing-vader-and-text-blob-to-human-sentiment-77068cf73982)

## Аналіз контексту

- [ ] **Визначення класу факторів** з контексту (наприклад, запиленість, загазованість, конкретний запах, свіжість, вологість)
- [ ] **Sentiment Analysis:** Аналіз настроїв, сприйняття контексту (фактора)
  - [ ] Розібратись з визначенням ступеню і знаку емоційного сприйняття (polarity)

- Існує в основному два підходи до аналізу настроїв:
  - <u>На основі лексикону</u>: підрахунок кількості позитивних і негативних слів у даному тексті; у підсумку більше число і буде настроєм тексту.
  - <u>Підхід на основі машинного навчання</u>: Розробіть модель класифікації, що навчається з допомогою попередньо позначеного набору даних - позитивного, негативного та нейтрального.